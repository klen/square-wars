function str_tbl(t)local i,l,n,o={}local function f()l,n,o="","",true end local function d(e)return tonum(e)or e end f()local e,c=1,#t while e<=c do local c=sub(t,e,e)if c=="゜"do if o do o=false elseif n=="⁶"or n=="‖"do i[d(l)]=n=="⁶"f()else i[d(l)]=d(n)f()end elseif c=="。"do local n,c,o=e,"",0while c~="゛"or o~=0do if c=="。"do o=o+1elseif c=="゛"do o=o-1end n=n+1c=sub(t,n,n)end i[d(l)]=str_tbl(sub(t,e+1,n-1))f()e=n else if o do l=l..c else n=n..c end end e=e+1end return i end
